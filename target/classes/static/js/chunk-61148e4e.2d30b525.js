(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-61148e4e"],{"0d22":function(t,e,s){"use strict";var o=s("5bed"),a=s.n(o);a.a},"33b5":function(t,e,s){},"5bed":function(t,e,s){},8738:function(t,e,s){},8851:function(t,e,s){"use strict";var o=s("8738"),a=s.n(o);a.a},9136:function(t,e,s){"use strict";var o=s("33b5"),a=s.n(o);a.a},c66d:function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"nk-container"},[s("Navbar",{attrs:{"active-index":"8"}}),s("div",{staticClass:"main"},[s("div",{staticClass:"container"},[s("div",{staticClass:"position-relative"},[s("ul",{staticClass:"nav nav-tabs"},[t._m(0),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:{name:"UserPosts",params:{uid:t.user.id}}}},[t._v(t._s(t.user.username)+"的文章")])],1),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:{name:"Collection",params:{uid:t.user.id}}}},[t._v(t._s(t.user.username)+"的收藏")])],1)])]),s("div",{staticClass:"media mt-5"},[s("el-avatar",{attrs:{src:t.user.avatar}}),s("div",{staticClass:"media-body"},[s("h5",{staticClass:"mt-0 text-warning"},[s("span",{domProps:{textContent:t._s(t.user.username)}}),t.isMine?t._e():s("button",{staticClass:"btn btn-info btn-sm float-right mr-5 follow-btn",attrs:{type:"button"},domProps:{textContent:t._s(t.hasFollowed?"取消关注":"关注TA")},on:{click:function(e){return t.follow(t.user.id)}}},[t._v("关注TA")])]),s("div",{staticClass:"text-muted mt-3"},[s("span",[t._v("注册于 "),s("i",{staticClass:"text-muted",domProps:{textContent:t._s(t.user.createTime)}},[t._v("2015-06-12 15:20:12")])])]),s("div",{staticClass:"text-muted mt-3 mb-5"},[s("span",[t._v("关注了 "),s("router-link",{staticClass:"text-primary",attrs:{to:{name:"Followees",params:{userId:t.user.id}}},domProps:{textContent:t._s(t.followeeCount)}}),t._v(" 人")],1),s("span",{staticClass:"ml-4"},[t._v("粉丝数量： "),s("router-link",{staticClass:"text-primary",attrs:{to:{name:"Followers",params:{userId:t.user.id}}},domProps:{textContent:t._s(t.followerCount)}}),t._v(" 人 ")],1),s("span",{staticClass:"ml-4"},[t._v("获得了 "),s("i",{staticClass:"text-danger",domProps:{textContent:t._s(t.likeCount)}}),t._v(" 个赞")])])])],1)])])],1)},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",{staticClass:"nav-item"},[s("a",{staticClass:"nav-link active",attrs:{href:"#"}},[t._v("个人信息")])])}],n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.activeIndex,mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},on:{select:t.handleSelect}},[s("el-menu-item",{attrs:{index:"1"}},[t._v("我的主页")]),s("el-menu-item",{attrs:{index:"2"}},[t._v("我的文章")]),s("el-menu-item",{attrs:{index:"3"}},[t._v("我的提问")]),s("el-menu-item",{attrs:{index:"4"}},[t._v("我的关注")]),s("el-menu-item",{attrs:{index:"5"}},[t._v("我的粉丝")]),s("el-menu-item",{attrs:{index:"6"}},[t._v("我收到的赞")]),s("el-menu-item",{staticClass:"myIndex",attrs:{index:"7"},on:{click:t.toHome}},[t._v("首页")])],1)],1)},i=[],r={name:"UserNavbar",data:function(){return{activeIndex:"1"}},methods:{handleSelect:function(t,e){console.log(t,e)},toHome:function(){this.$router.push("/")}}},l=r,u=(s("0d22"),s("2877")),c=Object(u["a"])(l,n,i,!1,null,"a9ef1e7c",null),m=c.exports,d=s("d178"),v={name:"UserHome",components:{UserNavbar:m,Navbar:d["a"]},created:function(){var t=this;console.log(this.$route.params.uid),this.$axios({method:"get",url:"/user/profile/"+this.$route.params.uid}).then((function(e){if(200==e.data.code){var s=e.data.data;console.log(s),t.user=s.user,t.isMine=s.isMine,t.likeCount=s.likeCount,t.user.avatar=t.uploadPath+t.user.avatar,t.followeeCount=s.followeeCount,t.followerCount=s.followerCount,t.hasFollowed=s.hasFollowed}else t.fail(e.data.msg);console.log(e)})).catch((function(t){console.log(t)}))},methods:{fail:function(t){this.$message.error(t)},handleExceed:function(t,e){this.$message.error("只能上传一张图片")},uploadSuccess:function(t,e,s){console.log(t),this.userInfo.avatar=t.msg,this.$store.commit("setUserInfo",this.userInfo)},beforeUplaod:function(t){var e=t.size/1024/1024<1;return e||this.$message.error("上传头像图片大小不能超过 1MB!"),e},follow:function(t){var e=this;if(this.$store.state.isLogin&&""!=this.$store.state.isLogin){var s="";s=e.hasFollowed?"/unfollow":"/follow",this.$axios({method:"post",url:s,data:{entityType:3,entityId:t}}).then((function(t){if(200==t.data.code){var s=t.data.data;console.log(s),e.followerCount=s.followerCount,e.hasFollowed=s.hasFollowed}else e.fail(t.data.msg);console.log(t)})).catch((function(t){console.log(t)}))}else this.$message.error("要登录才能关注哦")}},data:function(){return{uploadPath:this.$axios.defaults.baseURL,user:"",isMine:!1,likeCount:"",hasFollowed:!1,followeeCount:0,followerCount:0,avatarAction:this.$axios.defaults.baseURL+"/user/avatar",myHeader:{Authorization:sessionStorage.getItem("JWT_TOKEN")}}}},h=v,f=(s("8851"),Object(u["a"])(h,o,a,!1,null,"58809eb8",null));e["default"]=f.exports},d178:function(t,e,s){"use strict";var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"navbar"},[s("el-menu",{staticClass:"el-menu-demo myMenu",attrs:{"default-active":t.activeIndex,mode:"horizontal"},on:{select:t.handleSelect}},[s("el-menu-item",[t._v("关于本站")]),s("el-menu-item",{attrs:{index:"2"},on:{click:t.toIndex}},[t._v("最新")]),s("el-menu-item",{attrs:{index:"3"},on:{click:t.toHot}},[t._v("最热")]),s("el-menu-item",{attrs:{index:"4"},on:{click:t.toLetter}},[t._v("消息中心")]),s("el-menu-item",[s("el-input",{staticClass:"border-radius",model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),s("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.search}},[t._v("搜索")])],1),s("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:!t.$store.state.isLogin,expression:"!$store.state.isLogin"}],staticClass:"navInfo",on:{click:t.login}},[t._v("登录")]),s("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:!t.$store.state.isLogin,expression:"!$store.state.isLogin"}],staticClass:"navInfo",on:{click:t.register}},[t._v("注册")]),s("el-submenu",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.isLogin,expression:"$store.state.isLogin"}],staticClass:"navInfo",attrs:{index:"5"}},[s("template",{slot:"title"},[t._v("创建")]),s("el-menu-item",{attrs:{index:"5-1"},on:{click:function(e){return t.publish(0)}}},[t._v("提问")]),s("el-menu-item",{attrs:{index:"5-2"},on:{click:function(e){return t.publish(1)}}},[t._v("写文章")])],2),s("el-submenu",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.isLogin,expression:"$store.state.isLogin"}],staticClass:"navInfo",attrs:{index:"6"}},[s("el-menu-item",{domProps:{textContent:t._s(t.$store.state.userInfo.username)}}),s("template",{slot:"title"},[s("el-avatar",{attrs:{size:50,src:t.uploadPath+t.$store.state.userInfo.avatar}})],1),s("el-menu-item",{attrs:{index:"6-1"},on:{click:t.toHome}},[t._v("我的主页")]),s("el-menu-item",{attrs:{index:"6-2"},on:{click:t.toSetting}},[t._v("设置")]),s("el-menu-item",{attrs:{index:"6-2"},on:{click:t.toCollect}},[t._v("我的收藏")]),s("el-menu-item",{attrs:{index:"6-3"},on:{click:t.toUserPost}},[t._v("我的文章")]),s("el-menu-item",{attrs:{index:"6-4"},on:{click:t.logout}},[t._v("退出登录")])],2)],1),s("div",{staticClass:"line"})],1)},a=[],n={name:"Navbar",props:{activeIndex:{type:String,default:"2",required:!1}},created:function(){},data:function(){return{uploadPath:this.$axios.defaults.baseURL,isLogin:this.$store.state.isLogin,userInfo:this.$store.state.userInfo,keyword:""}},methods:{handleSelect:function(t,e){console.log(t,e)},toLetter:function(){this.$router.push("/letter")},login:function(){this.$router.push("/login")},register:function(){this.$router.push("/register")},logout:function(){this.$store.commit("logout")},publish:function(t){0==t?this.$router.push({path:"/post/query"}):this.$router.push({path:"/post/add"})},toIndex:function(){this.$router.push("/")},toHome:function(){var t=this;this.$router.push({name:"Profile",params:{uid:t.$store.state.userInfo.id}})},toHot:function(){this.$router.push({name:"Hot"})},search:function(){var t=this;this.$router.push({name:"Search",params:{keyword:t.keyword}})},toSetting:function(){this.$router.push("/setting")},toCollect:function(){var t=this;this.$router.push({name:"Collection",params:{uid:t.$store.state.userInfo.id}})},toUserPost:function(){var t=this;this.$router.push({name:"UserPosts",params:{uid:t.$store.state.userInfo.id}})}}},i=n,r=(s("9136"),s("2877")),l=Object(r["a"])(i,o,a,!1,null,"471a42fb",null);e["a"]=l.exports}}]);
//# sourceMappingURL=chunk-61148e4e.2d30b525.js.map