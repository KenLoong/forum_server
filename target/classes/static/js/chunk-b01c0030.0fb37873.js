(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b01c0030"],{"1dde":function(t,e,o){var r=o("d039"),n=o("b622"),i=o("2d00"),s=n("species");t.exports=function(t){return i>=51||!r((function(){var e=[],o=e.constructor={};return o[s]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"33b5":function(t,e,o){},"38c3":function(t,e,o){},"39be":function(t,e,o){"use strict";var r=o("38c3"),n=o.n(r);n.a},"4de4":function(t,e,o){"use strict";var r=o("23e7"),n=o("b727").filter,i=o("1dde"),s=o("ae40"),a=i("filter"),u=s("filter");r({target:"Array",proto:!0,forced:!a||!u},{filter:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},"65f0":function(t,e,o){var r=o("861d"),n=o("e8b5"),i=o("b622"),s=i("species");t.exports=function(t,e){var o;return n(t)&&(o=t.constructor,"function"!=typeof o||o!==Array&&!n(o.prototype)?r(o)&&(o=o[s],null===o&&(o=void 0)):o=void 0),new(void 0===o?Array:o)(0===e?0:e)}},"6bcb":function(t,e,o){"use strict";o.r(e);var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("navbar"),o("h1",[t._v(t._s(t.msg))]),o("div",{staticClass:"m-content"},[o("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"标题",prop:"title"}},[o("el-input",{model:{value:t.ruleForm.title,callback:function(e){t.$set(t.ruleForm,"title",e)},expression:"ruleForm.title"}})],1),o("el-form-item",{attrs:{label:"内容",prop:"content"}},[o("el-input",{attrs:{type:"textarea",rows:20},model:{value:t.ruleForm.content,callback:function(e){t.$set(t.ruleForm,"content",e)},expression:"ruleForm.content"}})],1),o("el-form-item",[o("el-upload",{ref:"upload",attrs:{action:t.action,data:t.uploadData,headers:t.myHeader,"list-type":"picture-card",limit:3,"auto-upload":!1,"on-preview":t.handlePictureCardPreview,"on-exceed":t.exceed,"before-upload":t.beforeUpload,"on-change":t.onChange}},[o("i",{staticClass:"el-icon-plus"}),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，最多上传3张图片，且每张图片不超过2M")])]),o("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[o("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("立即创建")]),o("el-button",{on:{click:t.cancel}},[t._v("取消")])],1)],1)],1)],1)},n=[],i=(o("4de4"),o("d178")),s={name:"PostAdd",components:{navbar:i["a"]},data:function(){return{dialogImageUrl:"",dialogVisible:!1,uploadData:{pid:""},action:this.$axios.defaults.baseURL+"/post/upload",myHeader:{Authorization:sessionStorage.getItem("JWT_TOKEN")},tag:this.$route.params.tag,msg:0==this.$route.params.tag?"提问":"写文章",ruleForm:{title:"",content:""},rules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],content:[{required:!0,message:"请输入内容",trigger:"blur"}]}}},methods:{success:function(){this.$message({message:"发表成功",type:"success"})},fail:function(t){this.$message.error(t)},submitForm:function(t){var e=this,o=this;this.$refs[t].validate((function(t){if(!t)return!1;e.$axios({method:"post",url:"/post/publish",data:{title:e.ruleForm.title,content:e.ruleForm.content,tag:0}}).then((function(t){200==t.data.code?(console.log(t.data.data),o.uploadData.pid=t.data.data,o.submitUpload(),o.success(),o.cancel()):o.fail(t.data.msg),console.log(t)})).catch((function(t){console.log(t)}))}))},cancel:function(){this.$router.push("/")},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},exceed:function(t,e){this.$message.error("最多只能上传3张图片")},submitUpload:function(){console.log(this.$refs.upload),this.$refs.upload.submit()},beforeUpload:function(t){var e=t.size/1024/1024<2;return console.log("再上传前执行了！！！！！！！！！！"),e||this.$message.error("图片大小不能超过2M！！！"),e},onChange:function(t,e){var o=this;e=e.filter((function(t){return o.isOver(t.size)})),console.log(e)},isOver:function(t){return t/1024/1024<2}}},a=s,u=(o("39be"),o("2877")),l=Object(u["a"])(a,r,n,!1,null,"2955fb74",null);e["default"]=l.exports},9136:function(t,e,o){"use strict";var r=o("33b5"),n=o.n(r);n.a},ae40:function(t,e,o){var r=o("83ab"),n=o("d039"),i=o("5135"),s=Object.defineProperty,a={},u=function(t){throw t};t.exports=function(t,e){if(i(a,t))return a[t];e||(e={});var o=[][t],l=!!i(e,"ACCESSORS")&&e.ACCESSORS,c=i(e,0)?e[0]:u,d=i(e,1)?e[1]:void 0;return a[t]=!!o&&!n((function(){if(l&&!r)return!0;var t={length:-1};l?s(t,1,{enumerable:!0,get:u}):t[1]=1,o.call(t,c,d)}))}},b727:function(t,e,o){var r=o("0366"),n=o("44ad"),i=o("7b0b"),s=o("50c4"),a=o("65f0"),u=[].push,l=function(t){var e=1==t,o=2==t,l=3==t,c=4==t,d=6==t,m=5==t||d;return function(f,p,h,v){for(var g,b,$=i(f),x=n($),w=r(p,h,3),y=s(x.length),_=0,k=v||a,C=e?k(f,y):o?k(f,0):void 0;y>_;_++)if((m||_ in x)&&(g=x[_],b=w(g,_,$),t))if(e)C[_]=b;else if(b)switch(t){case 3:return!0;case 5:return g;case 6:return _;case 2:u.call(C,g)}else if(c)return!1;return d?-1:l||c?c:C}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6)}},d178:function(t,e,o){"use strict";var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"navbar"},[o("el-menu",{staticClass:"el-menu-demo myMenu",attrs:{"default-active":t.activeIndex,mode:"horizontal"},on:{select:t.handleSelect}},[o("el-menu-item",[t._v("关于本站")]),o("el-menu-item",{attrs:{index:"2"},on:{click:t.toIndex}},[t._v("最新")]),o("el-menu-item",{attrs:{index:"3"},on:{click:t.toHot}},[t._v("最热")]),o("el-menu-item",{attrs:{index:"4"},on:{click:t.toLetter}},[t._v("消息中心")]),o("el-menu-item",[o("el-input",{staticClass:"border-radius",model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),o("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.search}},[t._v("搜索")])],1),o("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:!t.$store.state.isLogin,expression:"!$store.state.isLogin"}],staticClass:"navInfo",on:{click:t.login}},[t._v("登录")]),o("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:!t.$store.state.isLogin,expression:"!$store.state.isLogin"}],staticClass:"navInfo",on:{click:t.register}},[t._v("注册")]),o("el-submenu",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.isLogin,expression:"$store.state.isLogin"}],staticClass:"navInfo",attrs:{index:"5"}},[o("template",{slot:"title"},[t._v("创建")]),o("el-menu-item",{attrs:{index:"5-1"},on:{click:function(e){return t.publish(0)}}},[t._v("提问")]),o("el-menu-item",{attrs:{index:"5-2"},on:{click:function(e){return t.publish(1)}}},[t._v("写文章")])],2),o("el-submenu",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.isLogin,expression:"$store.state.isLogin"}],staticClass:"navInfo",attrs:{index:"6"}},[o("el-menu-item",{domProps:{textContent:t._s(t.$store.state.userInfo.username)}}),o("template",{slot:"title"},[o("el-avatar",{attrs:{size:50,src:t.uploadPath+t.$store.state.userInfo.avatar}})],1),o("el-menu-item",{attrs:{index:"6-1"},on:{click:t.toHome}},[t._v("我的主页")]),o("el-menu-item",{attrs:{index:"6-2"},on:{click:t.toSetting}},[t._v("设置")]),o("el-menu-item",{attrs:{index:"6-2"},on:{click:t.toCollect}},[t._v("我的收藏")]),o("el-menu-item",{attrs:{index:"6-3"},on:{click:t.toUserPost}},[t._v("我的文章")]),o("el-menu-item",{attrs:{index:"6-4"},on:{click:t.logout}},[t._v("退出登录")])],2)],1),o("div",{staticClass:"line"})],1)},n=[],i={name:"Navbar",props:{activeIndex:{type:String,default:"2",required:!1}},created:function(){},data:function(){return{uploadPath:this.$axios.defaults.baseURL,isLogin:this.$store.state.isLogin,userInfo:this.$store.state.userInfo,keyword:""}},methods:{handleSelect:function(t,e){console.log(t,e)},toLetter:function(){this.$router.push("/letter")},login:function(){this.$router.push("/login")},register:function(){this.$router.push("/register")},logout:function(){this.$store.commit("logout")},publish:function(t){0==t?this.$router.push({path:"/post/query"}):this.$router.push({path:"/post/add"})},toIndex:function(){this.$router.push("/")},toHome:function(){var t=this;this.$router.push({name:"Profile",params:{uid:t.$store.state.userInfo.id}})},toHot:function(){this.$router.push({name:"Hot"})},search:function(){var t=this;this.$router.push({name:"Search",params:{keyword:t.keyword}})},toSetting:function(){this.$router.push("/setting")},toCollect:function(){var t=this;this.$router.push({name:"Collection",params:{uid:t.$store.state.userInfo.id}})},toUserPost:function(){var t=this;this.$router.push({name:"UserPosts",params:{uid:t.$store.state.userInfo.id}})}}},s=i,a=(o("9136"),o("2877")),u=Object(a["a"])(s,r,n,!1,null,"471a42fb",null);e["a"]=u.exports},e8b5:function(t,e,o){var r=o("c6b6");t.exports=Array.isArray||function(t){return"Array"==r(t)}}}]);
//# sourceMappingURL=chunk-b01c0030.0fb37873.js.map