(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7b44c764"],{2165:function(e,t,s){"use strict";var o=s("7526"),r=s.n(o);r.a},"33b5":function(e,t,s){},7526:function(e,t,s){},9136:function(e,t,s){"use strict";var o=s("33b5"),r=s.n(o);r.a},a55b:function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("navbar"),s("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm ",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"用户名",prop:"username"}},[s("el-input",{staticClass:"form-item",model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),s("el-form-item",{attrs:{label:"密码",prop:"pass"}},[s("el-input",{staticClass:"form-item",attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.pass,callback:function(t){e.$set(e.ruleForm,"pass",t)},expression:"ruleForm.pass"}})],1),s("el-form-item",{staticClass:"inputbar",attrs:{prop:"seccode",label:"验证码"}},[s("el-input",{staticClass:"form-item vcode",model:{value:e.ruleForm.seccode,callback:function(t){e.$set(e.ruleForm,"seccode",t)},expression:"ruleForm.seccode"}}),s("el-button",{staticClass:"form-item vcode",attrs:{type:"primary"},on:{click:e.createCode}},[e._v(e._s(e.checkCode))])],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("登录")])],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.test}},[e._v("测试")])],1)],1)],1)},r=[],n=s("d178"),a={name:"Login",components:{navbar:n["a"]},data:function(){var e=this,t=function(t,s,o){""===s?o(new Error("请输入验证码!!!")):s!==e.checkCode?o(new Error("验证码错误!")):o()};return{checkCode:"",ruleForm:{username:"",pass:"",seccode:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],pass:[{required:!0,message:"请输入密码",trigger:"blur"},{min:8,max:20,message:"长度在 8 到 20 个字符",trigger:"blur"}],seccode:[{required:!0,trigger:"blur",validator:t}]}}},methods:{success:function(){this.$message({message:"登录成功",type:"success"})},fail:function(e){this.$message.error(e)},submitForm:function(e){var t=this,s=this;this.$refs[e].validate((function(e){if(!e)return!1;t.$axios({method:"post",url:"/user/login",data:{username:t.ruleForm.username,password:t.ruleForm.pass}}).then((function(e){200==e.data.code?(sessionStorage.setItem("JWT_TOKEN",e.data.data),s.getInfo(e.data.data),s.success(),s.$router.push("/")):s.fail(e.data.msg),console.log(e)})).catch((function(e){console.log(e)}))}))},getInfo:function(){var e=this;this.$axios({method:"post",url:"/user/getInfo"}).then((function(t){e.$store.commit("setUserInfo",t.data.data),e.$store.commit("setLoginState",!0),console.log(t)})).catch((function(e){console.log(e)}))},createCode:function(){for(var e="",t=4,s=new Array(0,1,2,3,4,5,6,7,8,9,"A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"),o=0;o<t;o++){var r=Math.floor(36*Math.random());e+=s[r]}this.checkCode=e},test:function(){this.$axios({method:"post",url:"/user/test"}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}},mounted:function(){this.createCode()}},i=a,u=(s("2165"),s("2877")),l=Object(u["a"])(i,o,r,!1,null,"362f9357",null);t["default"]=l.exports},d178:function(e,t,s){"use strict";var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"navbar"},[s("el-menu",{staticClass:"el-menu-demo myMenu",attrs:{"default-active":e.activeIndex,mode:"horizontal"},on:{select:e.handleSelect}},[s("el-menu-item",[e._v("关于本站")]),s("el-menu-item",{attrs:{index:"2"},on:{click:e.toIndex}},[e._v("最新")]),s("el-menu-item",{attrs:{index:"3"},on:{click:e.toHot}},[e._v("最热")]),s("el-menu-item",{attrs:{index:"4"},on:{click:e.toLetter}},[e._v("消息中心")]),s("el-menu-item",[s("el-input",{staticClass:"border-radius",model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),s("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")])],1),s("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:!e.$store.state.isLogin,expression:"!$store.state.isLogin"}],staticClass:"navInfo",on:{click:e.login}},[e._v("登录")]),s("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:!e.$store.state.isLogin,expression:"!$store.state.isLogin"}],staticClass:"navInfo",on:{click:e.register}},[e._v("注册")]),s("el-submenu",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.isLogin,expression:"$store.state.isLogin"}],staticClass:"navInfo",attrs:{index:"5"}},[s("template",{slot:"title"},[e._v("创建")]),s("el-menu-item",{attrs:{index:"5-1"},on:{click:function(t){return e.publish(0)}}},[e._v("提问")]),s("el-menu-item",{attrs:{index:"5-2"},on:{click:function(t){return e.publish(1)}}},[e._v("写文章")])],2),s("el-submenu",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.isLogin,expression:"$store.state.isLogin"}],staticClass:"navInfo",attrs:{index:"6"}},[s("el-menu-item",{domProps:{textContent:e._s(e.$store.state.userInfo.username)}}),s("template",{slot:"title"},[s("el-avatar",{attrs:{size:50,src:e.uploadPath+e.$store.state.userInfo.avatar}})],1),s("el-menu-item",{attrs:{index:"6-1"},on:{click:e.toHome}},[e._v("我的主页")]),s("el-menu-item",{attrs:{index:"6-2"},on:{click:e.toSetting}},[e._v("设置")]),s("el-menu-item",{attrs:{index:"6-2"},on:{click:e.toCollect}},[e._v("我的收藏")]),s("el-menu-item",{attrs:{index:"6-3"},on:{click:e.toUserPost}},[e._v("我的文章")]),s("el-menu-item",{attrs:{index:"6-4"},on:{click:e.logout}},[e._v("退出登录")])],2)],1),s("div",{staticClass:"line"})],1)},r=[],n={name:"Navbar",props:{activeIndex:{type:String,default:"2",required:!1}},created:function(){},data:function(){return{uploadPath:this.$axios.defaults.baseURL,isLogin:this.$store.state.isLogin,userInfo:this.$store.state.userInfo,keyword:""}},methods:{handleSelect:function(e,t){console.log(e,t)},toLetter:function(){this.$router.push("/letter")},login:function(){this.$router.push("/login")},register:function(){this.$router.push("/register")},logout:function(){this.$store.commit("logout")},publish:function(e){0==e?this.$router.push({path:"/post/query"}):this.$router.push({path:"/post/add"})},toIndex:function(){this.$router.push("/")},toHome:function(){var e=this;this.$router.push({name:"Profile",params:{uid:e.$store.state.userInfo.id}})},toHot:function(){this.$router.push({name:"Hot"})},search:function(){var e=this;this.$router.push({name:"Search",params:{keyword:e.keyword}})},toSetting:function(){this.$router.push("/setting")},toCollect:function(){var e=this;this.$router.push({name:"Collection",params:{uid:e.$store.state.userInfo.id}})},toUserPost:function(){var e=this;this.$router.push({name:"UserPosts",params:{uid:e.$store.state.userInfo.id}})}}},a=n,i=(s("9136"),s("2877")),u=Object(i["a"])(a,o,r,!1,null,"471a42fb",null);t["a"]=u.exports}}]);
//# sourceMappingURL=chunk-7b44c764.93ad79d1.js.map